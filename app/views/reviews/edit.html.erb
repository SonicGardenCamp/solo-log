<div class="d-grid gap-2 col-6 mx-auto text-center" >
  <h1>レビューを編集する</h1>
</div>
<br><br>

<div class="col-md-6 offset-md-3">
  <%= form_with(model: @review, method: :patch, url: review_path(@review), multipart: true) do |f| %>
    <%= render 'layouts/validation_errors', model: @review %>

    <div class="form-group">
      <%= f.label :rate, "このお店に星をつける" %>
      <br><br>
      <% 5.times do |i| %>
        <%= f.radio_button :rate, i + 1, checked: @review.rate == i + 1 %>
        <%= f.label :rate, value: i + 1 %>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <% end %>
    </div>
    <br><br>

    <div class="form-group">
      <%= f.label :image, "写真を投稿する" %>
      <br><br>
      <% if @review.image.present? %>
        <p>現在投稿されている写真</p>
        <%= image_tag @review.image.url, alt: "...", size: "200x200", class: "border" %>
      <% end %>
      <br><br>
      <p>新しい写真を選ぶ</p>
      <%= f.file_field :image, class: "form-control" %>
    </div>
    <br><br>


    <div class="form-group">
      <%= f.label :comment, "感想を書く" %>
      <br><br>
      <%= f.text_area :comment, class: "form-control" %>
    </div>
    <br><br>
    <br><br>
    
    <div class="form-group">
      <%= f.label :counter_sheets_available, "カウンター席があるかどうか" %>
      <br><br>
      <div class="form-check form-check-inline">
        <%= f.radio_button :counter_sheets_available, 1, checked: @review.counter_sheets_available == true %>
        <%= f.label :counter_sheets_available, 'ある', value: 1, class: "form-check-label" %>
      </div>
      <div class="form-check form-check-inline">
        <%= f.radio_button :counter_sheets_available, 0, checked: @review.counter_sheets_available == false %>
        <%= f.label :counter_sheets_available, 'なし', value: 0, class: "form-check-label" %>
      </div>
    </div>
    <br>
    
    <div class="form-group">
      <%= f.label :counter_sheets_available, "ひとり用のテーブル席があるかどうか" %>
      <br><br>
      <div class="form-check form-check-inline">
        <%= f.radio_button :solo_tables_available, 1, checked: @review.solo_tables_available == true %>
        <%= f.label :solo_tables_available, 'ある', value: 1, class: "form-check-label" %>
      </div>
      <div class="form-check form-check-inline">
        <%= f.radio_button :solo_tables_available, 0, checked: @review.solo_tables_available == false %>
        <%= f.label :solo_tables_available, 'なし', value: 0, class: "form-check-label" %>
      </div>
    </div>
  
    <br>
    <div class="form-group">
      <%= f.label :frequent_solo_visitors, "ひとり客の利用が多いかどうか" %>
      <br><br>
      <% 5.times do |i| %>
        <%= f.radio_button :frequent_solo_visitors, i + 1, checked: @review.frequent_solo_visitors == i + 1 %>
        <%= f.label :frequent_solo_visitors, value: i + 1 %>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <% end %>
    </div>
    <br><br>

    <div class="form-group">
      <%= f.label :easy_to_order, "注文がしやすいかどうか" %>
      <br><br>
      <% 5.times do |i| %>
        <%= f.radio_button :easy_to_order, i + 1, checked: @review.easy_to_order == i + 1 %>
        <%= f.label :easy_to_order, value: i + 1 %>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <% end %>
    </div>
    <br><br>

    <div class="form-group">
      <%= f.label :delivery_speed, "商品の提供スピードは速いかどうか" %>
      <br><br>
      <% 5.times do |i| %>
        <%= f.radio_button :delivery_speed, i + 1, checked: @review.delivery_speed == i + 1 %>
        <%= f.label :delivery_speed, value: i + 1 %>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <% end %>
    </div>
    <br><br>

    <div class="form-group">
      <%= f.label :calmness, "店内の雰囲気は良いかどうか" %>
      <br><br>
      <% 5.times do |i| %>
        <%= f.radio_button :calmness, i + 1, checked: @review.calmness == i + 1 %>
        <%= f.label :calmness, value: i + 1 %>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <% end %>
    </div>
    <br><br>
    <br><br>

    <div class="d-grid gap-2 col-6 mx-auto text-center">
      <%= f.submit "レビューを更新する", class: "btn btn-primary btn-lg" %>
    </div>
    <br><br>
  <% end %>
      <!-- ↓↓↓モーダルのトリガーボタン↓↓↓ -->
      <div class="d-grid gap-2 col-6 mx-auto text-center">
        <button type="button" class="btn btn-danger btn-lg" data-bs-toggle="modal" data-bs-target="#exampleModal">
          レビューを削除する
        </button>
      </div>
      <!--モーダルの実装-->
      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">削除しますか？</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              ＊削除したら元には戻せません
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">キャンセル</button>
              <%= button_to '削除する', review_path(@review), method: :delete, remote: true, data: { confirm: '削除しますか？' }, class: 'btn btn-danger' %>
            </div>
          </div>
        </div>
      </div>
  </div>
</div>
<br><br>